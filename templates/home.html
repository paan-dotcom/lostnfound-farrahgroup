<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Lost & Found Dashboard</title>
  <style>
    :root {
      --bg: #f3f4f6;
      --primary: #0284c7;
      --primary-dark: #0369a1;
      --card: #ffffff;
      --text: #0f172a;
      --muted: #64748b;
      --border: #e5e7eb;
      --lost: #ef4444;
      --found: #22c55e;
    }

    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: var(--bg);
      color: var(--text);
    }

    .topbar {
      background: var(--primary);
      color: white;
      padding: 14px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .topbar .title { font-weight: bold; letter-spacing: 0.3px; }
    .topbar a {
      color: white;
      text-decoration: none;
      font-weight: bold;
      background: rgba(255,255,255,0.15);
      padding: 8px 12px;
      border-radius: 10px;
    }

    .container {
      max-width: 1100px;
      margin: 24px auto;
      padding: 0 16px;
    }

    .hero {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 18px;
      padding: 22px;
      margin-bottom: 18px;
    }
    .hero h1 { margin: 0 0 8px; }
    .hero p { margin: 0; color: var(--muted); }

    .grid {
      display: grid;
      gap: 16px;
      grid-template-columns: 1.2fr 0.8fr;
    }

    .card {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 18px;
      padding: 18px;
    }

    .stats {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 12px;
      margin-top: 14px;
    }
    .stat {
      background: #f8fafc;
      border: 1px solid var(--border);
      border-radius: 14px;
      padding: 12px;
    }
    .stat .num { font-size: 22px; font-weight: bold; }
    .stat .label { color: var(--muted); font-size: 13px; }

    .actions {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 12px;
      margin-top: 14px;
      max-width: 520px;
    }
    .btn {
      display: inline-block;
      text-align: center;
      padding: 12px;
      border-radius: 14px;
      border: 0;
      text-decoration: none;
      font-weight: bold;
      cursor: pointer;
    }
    .btn-primary { background: var(--primary); color: white; }
    .btn-primary:hover { background: var(--primary-dark); }
    .btn-outline {
      background: white;
      border: 1px solid var(--border);
      color: var(--text);
    }

    .filters {
      display: grid;
      grid-template-columns: 1fr;
      gap: 10px;
      margin-top: 12px;
    }
    input, select {
      width: 100%;
      padding: 11px;
      border: 1px solid var(--border);
      border-radius: 12px;
      outline: none;
      margin-bottom: 5px;
    }

    .items {
      display: grid;
      grid-template-columns: 1fr;
      gap: 10px;
      margin-top: 12px;
    }
    .item {
      border: 1px solid var(--border);
      border-radius: 14px;
      padding: 12px;
      display: flex;
      justify-content: space-between;
      align-items: start;
      gap: 12px;
      background: #fff;
    }
    .item h3 { margin: 0 0 4px; font-size: 16px; }
    .item .meta { color: var(--muted); font-size: 13px; }
    .badge {
      padding: 6px 10px;
      border-radius: 999px;
      font-size: 12px;
      color: white;
      font-weight: bold;
    }
    .badge-lost { background: var(--lost); }
    .badge-found { background: var(--found); }

    .footer {
      margin-top: 18px;
      color: var(--muted);
      font-size: 12px;
      text-align: center;
      padding: 10px 0 30px;
    }

    @media (max-width: 900px) {
      .grid { grid-template-columns: 1fr; }
    }
  </style>
</head>

<body>
  <div class="topbar">
    <div class="title">Lost & Found System</div>
    <a href="{{ url_for('logout') }}">Logout</a>
  </div>

  <div class="container">
    <div class="hero">
      <h1>Welcome to the Lost & Found Dashboard</h1>
      <p>Report missing items, track found belongings, and help reunite items with their owners.</p>

      <div class="stats">
        <div class="stat">
          <div class="num">{{ total_items if total_items is defined else "0" }}</div>
          <div class="label">Total Reports</div>
        </div>
        <div class="stat">
          <div class="num">{{ total_lost if total_lost is defined else "0" }}</div>
          <div class="label">Lost Items</div>
        </div>
        <div class="stat">
          <div class="num">{{ total_found if total_found is defined else "0" }}</div>
          <div class="label">Found Items</div>
        </div>
      </div>

      <div class="actions">
        <a class="btn btn-primary" href="{{ url_for('report') }}">+ Report an Item</a>
        <a class="btn btn-outline" href="{{ url_for('home') }}">Refresh</a>
      </div>
    </div>

    <div class="grid">
      <div class="card">
        <h2 style="margin:0 0 6px;">Latest Reports</h2>
        <div style="color:var(--muted); font-size:13px;">Most recent lost/found submissions.</div>

        {% if items is defined and items %}
          <div class="items">
            {% for item in items %}
              <div class="item">
                <div>
                  <h3>{{ item.title }}</h3>
                  <div class="meta">
                    <b>Location:</b> {{ item.location }} • 
                    <b>Category:</b> {{ item.category }} <br>
                    <b>Posted:</b> {{ item.created_at.strftime("%Y-%m-%d") if item.created_at else "Today" }}
                  </div>
                  <div class="meta" style="margin-top: 6px;">
                    <i>"{{ item.description }}"</i>
                  </div>
                </div>

                {% if item.type|lower == "lost" %}
                  <span class="badge badge-lost">LOST</span>
                {% elif item.type|lower == "found" %}
                  <span class="badge badge-found">FOUND</span>
                {% else %}
                  <span class="badge" style="background:#94a3b8;">{{ item.type|upper }}</span>
                {% endif %}
              </div>
            {% endfor %}
          </div>
        {% else %}
          <div class="items">
            <div style="padding: 20px; text-align: center; color: var(--muted);">
              No reports found. Be the first to report something!
            </div>
          </div>
        {% endif %}
      </div>

      <div class="card">
        <h2 style="margin:0 0 6px;">Search & Filter</h2>
        <div style="color:var(--muted); font-size:13px;">Find items faster.</div>

        <form action="{{ url_for('home') }}" method="GET">
          <div class="filters">
            <input name="search" placeholder="Search keyword..." value="{{ request.args.get('search', '') }}" />
            
            <select name="status">
              <option value="all" {% if request.args.get('status') == 'all' %}selected{% endif %}>All Status</option>
              <option value="lost" {% if request.args.get('status') == 'lost' %}selected{% endif %}>Lost</option>
              <option value="found" {% if request.args.get('status') == 'found' %}selected{% endif %}>Found</option>
            </select>

            <select name="category">
              <option value="all">All Categories</option>
              <option value="Student ID / Matric Card" {% if request.args.get('category') == 'Student ID / Matric Card' %}selected{% endif %}>Student ID / Matric Card</option>
              <option value="Wallet / Purse" {% if request.args.get('category') == 'Wallet / Purse' %}selected{% endif %}>Wallet / Purse</option>
              <option value="Phone / Tablet" {% if request.args.get('category') == 'Phone / Tablet' %}selected{% endif %}>Phone / Tablet</option>
              <option value="Laptop / Charger" {% if request.args.get('category') == 'Laptop / Charger' %}selected{% endif %}>Laptop / Charger</option>
              <option value="Keys" {% if request.args.get('category') == 'Keys' %}selected{% endif %}>Keys</option>
              <option value="Earbuds / Headphones" {% if request.args.get('category') == 'Earbuds / Headphones' %}selected{% endif %}>Earbuds / Headphones</option>
              <option value="Bag / Backpack" {% if request.args.get('category') == 'Bag / Backpack' %}selected{% endif %}>Bag / Backpack</option>
              <option value="Books / Notes" {% if request.args.get('category') == 'Books / Notes' %}selected{% endif %}>Books / Notes</option>
              <option value="Other" {% if request.args.get('category') == 'Other' %}selected{% endif %}>Other</option>
            </select>
          </div>

          <div style="margin-top:12px;">
            <button class="btn btn-primary" type="submit" style="width:100%;">Search</button>
          </div>
        </form>

        <div style="margin-top:14px; font-size:13px; color:var(--muted);">
          Tip: Report items with clear location + contact info so others can return it faster.
        </div>
      </div>
    </div>

    <div class="footer">
      Lost & Found System • Help items return to their owners
    </div>
  </div>
</body>
</html>